var webSocketPHP={};webSocketPHP.init=function(e){return window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket?("undefined"==typeof e&&(e={}),webSocketPHP._settings=$.extend({url:null,sid:null,attemptsCount:5,attemptsTimeout:10,debug:!1,onConnect:null,onDisconnect:null,onMessage:function(e){console.info(e)}},e),null===webSocketPHP._settings.url||""===webSocketPHP._settings.url?void console.error('WebSocket: Option "url" is empty'):null===webSocketPHP._settings.sid||""===webSocketPHP._settings.sid?void console.error('WebSocket: Option "sid" is empty'):(webSocketPHP._settings.attemptsNum=1,void webSocketPHP._connect())):void console.info("WebSocket not supported")},webSocketPHP._connect=function(){var e=new WebSocket(webSocketPHP._settings.url+"/?sid="+webSocketPHP._settings.sid);e.onopen=function(){webSocketPHP._settings.debug===!0&&console.info("WebSocket connection success"),webSocketPHP._settings.attemptsNum=0,"function"==typeof webSocketPHP._settings.onConnect&&webSocketPHP._settings.onConnect()},e.onerror=function(e){webSocketPHP._settings.debug===!0&&console.error("WebSocket error",e)},e.onclose=function(e){if(webSocketPHP._settings.debug===!0&&(e.wasClean?console.info("WebSocket connection is closed"):console.error("WebSocket connection failure code: "+e.code)),"function"==typeof webSocketPHP._settings.onDisconnect&&webSocketPHP._settings.onDisconnect(),webSocketPHP._settings.attemptsNum<webSocketPHP._settings.attemptsCount){webSocketPHP._settings.attemptsNum++;var t=webSocketPHP._settings.attemptsTimeout*webSocketPHP._settings.attemptsNum*1e3;setTimeout(function(){webSocketPHP._connect()},t)}},e.onmessage=function(e){"function"==typeof webSocketPHP._settings.onMessage&&webSocketPHP._settings.onMessage(JSON.parse(e.data))}};